---
title: ç¬¬03ç« -Rediså®¢æˆ·ç«¯
date: 2023-02-10 15:13:17
permalink: /pages/45a245/
tags: 
  - null
author: 
  name: CodeAshen
  link: https://github.com/codeashen
categories: 
  - æ•°æ®åº“
  - Redisä»å…¥é—¨åˆ°é«˜å¯ç”¨
---
# å®¢æˆ·ç«¯é€‰æ‹©

Rediså®¢æˆ·ç«¯çš„é€‰æ‹©ï¼š[å®˜ç½‘åˆ—è¡¨](https://redis.io/clients)ï¼Œé‡Œé¢ç½—åˆ—äº†å„ç§è¯­è¨€çš„å®¢æˆ·ç«¯ï¼ŒåŒæ—¶æ ‡è®°ğŸ˜Šå’Œâ­ï¼Œä¸ºä¼˜ç§€å®¢æˆ·ç«¯

![image-20210602092851261](https://z3.ax1x.com/2021/06/02/2MeS1S.png)

# ä¸€ã€Javaå®¢æˆ·ç«¯ï¼šJedis

## 1.1 åŸºæœ¬ä½¿ç”¨

å¼•å…¥ä¾èµ–

```xml
<dependency>
	<groupId>redis.clients</groupId>
    <artifactId>jedis</artifactId>
    <version>2.9.0</version>
    <scope>compile</scope>
</dependency>
```

åˆ›å»º Jedis è¿æ¥å¯¹è±¡

```java
// 1. ç”Ÿæˆä¸€ä¸ª Jedis å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è´Ÿè´£å’ŒæŒ‡å®š Redis èŠ‚ç‚¹è¿›è¡Œé€šä¿¡ 
Jedis jedis = new Jedis("127.0.0.1", 6379); 
// 2. jedis æ‰§è¡Œ set æ“ä½œ 
jedis.set("hello", "world"); 
// 3. jedis æ‰§è¡Œ get æ“ä½œï¼Œvalue="world"
String value = jedis.get("hello");
```

> Jedis å®¢æˆ·ç«¯æ„é€ å‡½æ•°ï¼š
>
> `Jedis(String host, int port, int connectionTimeout, int soTimeout)`
>
> * `host`ï¼šRedis èŠ‚ç‚¹çš„æ‰€åœ¨æœºå™¨çš„ IP
> * `port`ï¼šRedis èŠ‚ç‚¹çš„ç«¯å£ 
> * `connectionTimeout`ï¼šå®¢æˆ·ç«¯è¿æ¥è¶…
> * `soTimeout`ï¼šå®¢æˆ·ç«¯è¯»å†™è¶…æ—¶

ç®€å•ä½¿ç”¨

```java
// 1. string 
// è¾“å‡ºç»“æœï¼šOK 
jedis.set("hello", "world"); 
// è¾“å‡ºç»“æœï¼šworld 
jedis.get("hello"); 
// è¾“å‡ºç»“æœï¼š1 
jedis.incr("counter");

// 2. hash 
jedis.hset("myhash", "f1", "v1"); 
jedis.hset("myhash", "f2", "v2"); 
// å‡ºç»“æœï¼š{f1=v1, f2=v2} 
jedis.hgetAll("myhash");

// 3. list 
jedis.rpush("mylist", "1"); 
jedis.rpush("mylist", "2"); 
jedis.rpush("mylist", "3");
//è¾“å‡ºç»“æœï¼š[1ï¼Œ2,3] 
jedis.lrange("mylist", 0, -1);

// 4. set 
jedis.sadd("myset", "a"); 
jedis.sadd("myset", "b"); 
jedis.sadd("myset", "a"); 
// è¾“å‡ºç»“æœï¼š[b,a] 
jedis.smembers("myset");

// 5. zset 
jedis.zadd("myzset", 99, "tom"); 
jedis.zadd("myzset", 66, "peter"); 
jedis.zadd("myzset", 33, "james"); 
// è¾“å‡ºç»“æœï¼š[["james"],33.0],[["peter"],66.0],["tom],99.0] 
jedis.zrangeWithScores("myzset", 0, -1);
```

## 1.2 Jedis ç›´è¿å’Œè¿æ¥æ± 

**1. Jedis ç›´è¿**

![Jedisç›´è¿](https://z3.ax1x.com/2021/06/02/2MErNV.png)

**2. Jedis è¿æ¥æ± **

![Jedisè¿æ¥æ± ](https://z3.ax1x.com/2021/06/02/2ME2jJ.png)

Jedis è¿æ¥æ± çš„åŸºæœ¬ä½¿ç”¨ï¼š

```java
// åˆå§‹åŒ– Jedis è¿æ¥æ± ï¼Œé€šå¸¸æ¥è®² JedisPool æ˜¯å•ä¾‹çš„ã€‚
GenericObjectPoolConfig poolConfig = new GenericObjectPoolConfig(); 
JedisPool jedisPool = new JedisPool(poolConfig, "127.0.0.1", 6379);

Jedis jedis = null; 
try { 
    // 1. ä»è¿æ¥æ± è·å– jedis å¯¹è±¡ 
    jedis = jedisPool.getResource(); 
    // 2. æ‰§è¡Œæ“ä½œ 
    jedis.set("hello", "world"); 
} catch (Exception e) { 
    e.printStackTrace;
} finally { 
    if (jedis != null) 
        // å¦‚æœä½¿ç”¨ JedisPool, close æ“ä½œä¸æ˜¯å…³é—­è¿æ¥ï¼Œä»£è¡¨å½’è¿˜è¿æ¥æ±  
        jedis.close(); 
}
```

**3. æ–¹æ¡ˆå¯¹æ¯”**

|        | ä¼˜ç‚¹                                                                 | ç¼ºç‚¹                                                                                         |
| ------ | -------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- |
| ç›´è¿   | - ç®€å•æ–¹ä¾¿<br>- é€‚ç”¨äºå°‘é‡é•¿æœŸè¿æ¥çš„åœºæ™¯                             | - å­˜åœ¨æ¯æ¬¡æ–°å»º/å…³é—­ TCP å¼€é”€<br>- èµ„æºæ— æ³•æ§åˆ¶ï¼Œå­˜åœ¨è¿æ¥æ³„éœ²çš„å¯èƒ½<br>- Jedis å¯¹è±¡çº¿ç¨‹ä¸å®‰å…¨ |
| è¿æ¥æ±  | - Jedis é¢„å…ˆç”Ÿæˆï¼Œé™ä½å¼€é”€ä½¿ç”¨<br>- è¿æ¥æ± çš„å½¢å¼ä¿æŠ¤å’Œæ§åˆ¶èµ„æºçš„ä½¿ç”¨ | ç›¸å¯¹äºç›´è¿ï¼Œä½¿ç”¨ç›¸å¯¹éº»çƒ¦ï¼Œå°¤å…¶åœ¨èµ„æºçš„ç®¡ç†ä¸Šéœ€è¦å¾ˆå¤šå‚æ•°æ¥ä¿è¯ï¼Œä¸€æ—¦è§„åˆ’ä¸åˆç†ä¹Ÿä¼šå‡ºç°é—®é¢˜   |

# äºŒã€Python å®¢æˆ·ç«¯ï¼šredis-py

å‚è€ƒ github ä»“åº“ï¼š[andymccurdy/redis-py](https://github.com/andymccurdy/redis-py)

**1. redis-py å®‰è£…**

```bash
# æ–¹å¼ä¸€:pip
> pip install redis

# æ–¹å¼äºŒï¼šeasy_install
> easy_install redis

# æ–¹å¼ä¸‰ï¼šæºç å®‰è£…
> wget https://github.com/andymccurdy/redis-py/archive/2.10.5.zip 
> unzip redis-2.10.5.zip 
> cd redis-2.10.5 
> sudo python setup.py install
```

**2. redis-py åŸºæœ¬ä½¿ç”¨**

```python
# å¯¼å…¥ä½¿ç”¨
import redis 
client = redis.StrictRedis(host=127.0.0.1,port=6379) 
key="hello"
setResult = client.set(key, "python-redis") 
print setResult 
value = client.get(key) 
print "key:" + key + ",value:" + value

# 1. string
# è¾“å‡ºç»“æœï¼šTrue 
client.set("hello", "world") 
# è¾“å‡ºç»“æœï¼šworld 
client.get("hello") 
# è¾“å‡ºç»“æœï¼š1 
client.incr("counter")

# 2. hash 
client.hset("myhash", "f1", "v1") 
client.hset("myhash", "f2", "v2") 
# è¾“å‡ºç»“æœï¼š{(f1:v1, f2:v2} 
client.hgetall("myhash")

# 3. list 
client.rpush("mylist", "1") 
client.rpush("mylist", "2") 
client.rpush("mylist", "3") 
#è¾“å‡ºç»“æœï¼š['1', '2', '3'] 
clientIrange("mylist", 0, -1)

# 4. set 
client.sadd("myset", "a") 
client.sadd("myset", "b") 
client sadd("myset", "a") 
#è¾“å‡ºç»“æœï¼šset(['a', 'b']) 
client.smembers("myset")

# 5. zset 
client.zadd("myzset", "99", "tom") 
client.zadd("myzset", "66", "peter") 
client.zadd("myzset", "33", "james") 
#è¾“å‡ºç»“æœï¼š[('james', 33.0), ('peter', 66.0), ('tom', 99.0)] 
client.zrange("myzset", 0, -1, withscores=True)
```

# ä¸‰ã€Go å®¢æˆ·ç«¯ï¼šredigo

è¿æ¥ï¼š

```go
c, err := redis.Dial("tcp", "127.0.0.1:6379")
if err != nil {
    fmt.Println(err)
    return
}
defer c.Cloes()
```

ä½¿ç”¨ï¼š

```go
v, err := c.Do("SET", "hello", "world")
if err != nil {
    fmt.Println(err)
    return
}
fmt.Println(v)
v, err = redis.String(c.Do("GET", "hello"))
if err != nil {
    fmt.Println(err)
    return
}
```







